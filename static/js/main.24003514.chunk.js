(this.webpackJsonppainter=this.webpackJsonppainter||[]).push([[0],{22:function(t,e,o){},23:function(t,e,o){},30:function(t,e,o){},31:function(t,e,o){"use strict";o.r(e);var n,i,s,r,a,c,l,u,h,b,p=o(1),d=o.n(p),f=o(12),v=o.n(f),g=(o(22),o(15)),j=o(5),O=o(6),y=o(7),w=o(4),m=(o(14),o(0)),k=(n=function(){function t(){Object(O.a)(this,t),Object(j.a)(this,"canvas",i,this),Object(j.a)(this,"backList",s,this),Object(j.a)(this,"forwardList",r,this),Object(j.a)(this,"setCanvas",a,this),Object(j.a)(this,"pushToBack",c,this),Object(j.a)(this,"pushToFor",l,this),Object(m.e)(this)}return Object(y.a)(t,[{key:"back",value:function(){var t=this,e=this.canvas.getContext("2d");if(this.backList.length>0){var o=this.backList.pop();this.forwardList.push(this.canvas.toDataURL());var n=new Image;n.src=o,n.onload=function(){e.clearRect(0,0,t.canvas.width,t.canvas.height),e.drawImage(n,0,0,t.canvas.width,t.canvas.height)}}else e.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"forward",value:function(){var t=this,e=this.canvas.getContext("2d");if(this.forwardList.length>0){var o=this.forwardList.pop();this.backList.push(this.canvas.toDataURL());var n=new Image;n.src=o,n.onload=function(){e.clearRect(0,0,t.canvas.width,t.canvas.height),e.drawImage(n,0,0,t.canvas.width,t.canvas.height)}}}}]),t}(),i=Object(w.a)(n.prototype,"canvas",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=Object(w.a)(n.prototype,"backList",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=Object(w.a)(n.prototype,"forwardList",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=Object(w.a)(n.prototype,"setCanvas",[m.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.canvas=e}}}),c=Object(w.a)(n.prototype,"pushToBack",[m.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.backList.push(e)}}}),l=Object(w.a)(n.prototype,"pushToFor",[m.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.forwardList.push(e)}}}),Object(w.a)(n.prototype,"back",[m.b],Object.getOwnPropertyDescriptor(n.prototype,"back"),n.prototype),Object(w.a)(n.prototype,"forward",[m.b],Object.getOwnPropertyDescriptor(n.prototype,"forward"),n.prototype),n),x=(u=function(){function t(){Object(O.a)(this,t),Object(j.a)(this,"tool",h,this),Object(j.a)(this,"color",b,this),Object(m.e)(this)}return Object(y.a)(t,[{key:"getCoords",value:function(){return this.tool.coords}},{key:"deleteCoords",value:function(){this.tool.coords=[]}},{key:"getColor",value:function(){return this.color}},{key:"setColor",value:function(t){this.color=t}},{key:"setToolColor",value:function(t){this.tool.strokeColor=t,this.tool.fillColor=t,this.color=t}},{key:"getTool",value:function(){return this.tool}},{key:"setTool",value:function(t){this.tool=t}},{key:"setLineWidth",value:function(t){this.tool.lineWidth=t}}]),t}(),h=Object(w.a)(u.prototype,"tool",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Object(w.a)(u.prototype,"color",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(w.a)(u.prototype,"getCoords",[m.b],Object.getOwnPropertyDescriptor(u.prototype,"getCoords"),u.prototype),Object(w.a)(u.prototype,"deleteCoords",[m.b],Object.getOwnPropertyDescriptor(u.prototype,"deleteCoords"),u.prototype),Object(w.a)(u.prototype,"getColor",[m.b],Object.getOwnPropertyDescriptor(u.prototype,"getColor"),u.prototype),Object(w.a)(u.prototype,"setColor",[m.b],Object.getOwnPropertyDescriptor(u.prototype,"setColor"),u.prototype),Object(w.a)(u.prototype,"setToolColor",[m.b],Object.getOwnPropertyDescriptor(u.prototype,"setToolColor"),u.prototype),Object(w.a)(u.prototype,"getTool",[m.b],Object.getOwnPropertyDescriptor(u.prototype,"getTool"),u.prototype),Object(w.a)(u.prototype,"setTool",[m.b],Object.getOwnPropertyDescriptor(u.prototype,"setTool"),u.prototype),Object(w.a)(u.prototype,"setLineWidth",[m.b],Object.getOwnPropertyDescriptor(u.prototype,"setLineWidth"),u.prototype),u),C=Object.freeze({canvasState:new k,toolState:new x}),S=d.a.createContext(C),L=S.Provider,T=function(t){return d.a.useContext(S)[t]},D=(o(23),o(17)),P=o(16),I=function(t){Object(D.a)(o,t);var e=Object(P.a)(o);function o(t){var n;return Object(O.a)(this,o),(n=e.call(this,t)).inMouseDown=!1,n.coords=[],n.color="",n.listen(),n}return Object(y.a)(o,[{key:"listen",value:function(){this.canvas.onmousemove=this.mouseMoveHandler.bind(this),this.canvas.onmousedown=this.mouseDownHandler.bind(this),this.canvas.onmouseup=this.mouseUpHandler.bind(this),this.canvas.addEventListener("touchstart",this.touchStartHandler.bind(this)),this.canvas.addEventListener("touchmove",this.touchMoveHandler.bind(this)),this.canvas.addEventListener("touchend",this.touchEndHandler.bind(this))}},{key:"touchMoveHandler",value:function(t){t.preventDefault(),this.inMouseDown&&this.draw(t.touches[0].clientX-t.target.offsetLeft,t.touches[0].clientY-t.target.offsetTop)}},{key:"touchStartHandler",value:function(t){this.inMouseDown=!0,this.ctx.beginPath(),this.coords.push(String(sessionStorage.getItem("color"))),this.draw(t.touches[0].clientX-t.target.offsetLeft,t.touches[0].clientY-t.target.offsetTop)}},{key:"touchEndHandler",value:function(t){t.preventDefault(),this.inMouseDown=!1,this.ctx.beginPath(),this.coords.push("touchend")}},{key:"mouseDownHandler",value:function(t){this.inMouseDown=!0,this.ctx.beginPath(),this.coords.push(String(sessionStorage.getItem("color"))),this.draw(t.pageX-t.target.offsetLeft,t.pageY-t.target.offsetTop)}},{key:"mouseMoveHandler",value:function(t){this.inMouseDown&&this.draw(t.pageX-t.target.offsetLeft,t.pageY-t.target.offsetTop)}},{key:"mouseUpHandler",value:function(t){t.preventDefault(),this.inMouseDown=!1,this.ctx.beginPath(),this.coords.push("mouseup")}},{key:"draw",value:function(t,e){this.ctx.lineTo(t,e),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(t,e,this.ctx.lineWidth/2,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.coords.push([t,e])}}]),o}(function(){function t(e){Object(O.a)(this,t),this.canvas=void 0,this.ctx=void 0,this.canvas=e,this.ctx=e.getContext("2d"),this.destroyEvents()}return Object(y.a)(t,[{key:"fillColor",set:function(t){this.ctx.fillStyle=t}},{key:"strokeColor",set:function(t){this.ctx.strokeStyle=t}},{key:"lineWidth",set:function(t){this.ctx.lineWidth=t}},{key:"destroyEvents",value:function(){this.canvas.onmousemove=null,this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.ontouchstart=null,this.canvas.ontouchmove=null,this.canvas.ontouchend=null}}]),t}()),N=o(2),M=Object(g.a)((function(){var t=d.a.useRef(null),e=T("canvasState"),o=T("toolState");o.setColor("#000"),d.a.useEffect((function(){e.setCanvas(t.current),o.setTool(new I(t.current)),sessionStorage.setItem("color",JSON.stringify(o.getColor())),console.log(e.backList)}),[]);return Object(N.jsx)("div",{className:"canvas",children:Object(N.jsx)("canvas",{ref:t,width:window.innerWidth,height:window.innerHeight-45,onMouseDown:function(){var o;e.pushToBack(null===(o=t.current)||void 0===o?void 0:o.toDataURL())}})})})),H=o(8),W=o(9),z=(o(30),function(){var t=T("toolState"),e=T("canvasState");return Object(N.jsxs)("div",{className:"button-block",children:[Object(N.jsx)("button",{className:"brush",onClick:function(){null===t.getTool()&&t.setTool(new I(e.canvas)),t.setToolColor(t.getColor())},children:Object(N.jsx)(H.a,{icon:W.d})}),Object(N.jsx)("button",{className:"eraser",onClick:function(){var t=e.canvas.getContext("2d");t.fillStyle="white",t.strokeStyle="white"},children:Object(N.jsx)(H.a,{icon:W.c})}),Object(N.jsx)("input",{className:"brush-width",onChange:function(e){t.setLineWidth(e.target.value)},defaultValue:1,min:1,max:50,type:"range"}),Object(N.jsx)("input",{className:"\u0441olor",onChange:function(e){return function(e){t.setToolColor(e.target.value),sessionStorage.setItem("color",JSON.stringify(t.getColor()))}(e)},type:"color"}),Object(N.jsx)("button",{className:"replay",onClick:function(){var t=JSON.parse(String(sessionStorage.getItem("coords"))),o=e.canvas,n=o.getContext("2d");if(t){n.clearRect(0,0,o.width,o.height),n.beginPath();var i=setInterval((function(){if(!t.length)return clearInterval(i),void n.beginPath();var e=t.shift(),o={clientX:e[0],clientY:e[1]};n.lineTo(o.clientX,o.clientY),n.stroke(),n.beginPath(),n.arc(o.clientX,o.clientY,n.lineWidth/2,0,2*Math.PI),n.fill(),n.beginPath(),n.moveTo(o.clientX,o.clientY)}),10)}return!1},children:Object(N.jsx)(H.a,{icon:W.e})}),Object(N.jsx)("button",{className:"save",onClick:function(){sessionStorage.setItem("coords",JSON.stringify(t.getCoords()))},children:Object(N.jsx)(H.a,{icon:W.f})}),Object(N.jsx)("button",{className:"back",onClick:function(){return e.back()},children:Object(N.jsx)(H.a,{icon:W.a})}),Object(N.jsx)("button",{className:"forward",onClick:function(){return e.forward()},children:Object(N.jsx)(H.a,{icon:W.b})}),Object(N.jsx)("button",{className:"delete",onClick:function(){var o=e.canvas,n=o.getContext("2d");n.clearRect(0,0,o.width,o.height),n.beginPath(),n.fillStyle=t.getColor(),n.strokeStyle=t.getColor(),sessionStorage.removeItem("coords"),t.deleteCoords()},children:Object(N.jsx)(H.a,{icon:W.g})})]})}),E=function(){return Object(N.jsxs)("div",{className:"app",children:[Object(N.jsx)(z,{}),Object(N.jsx)(M,{})]})};v.a.render(Object(N.jsx)(d.a.StrictMode,{children:Object(N.jsx)(L,{value:C,children:Object(N.jsx)(E,{})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.24003514.chunk.js.map